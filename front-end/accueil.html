<!DOCTYPE html>
<html lang="fr">
<head>
    <title>Liste des artistes</title>
    <link rel="stylesheet" type="text/css" href="/front-end/css/accueil.css">
</head>
<body>
<h1>Liste des artistes</h1>
<ul>
    <form action="/search" method="get">
        <label>
            <label for="search">Recherche :</label>
            <input type="text" placeholder="Search" id="search"  list="suggestions">
            <datalist id="suggestions">
                {{range .}}
                <option value="{{if gt (len .Members) 2}} {{.Name}} - groupe {{else}} {{.Name}} - membre {{end}}">
                    {{end}}
            </datalist>


        </label>
        <button type="submit">Search</button>
    </form>
    {{range .}}
        <li id="artist{{.ID}}">
            <div class="artiste-box">
                <img src="{{.ImageURL}}" alt="{{.Name}}" />
                <div class="info">
                    <p>Albums : {{.Albums}}</p>
                    <p>Pistes : {{.Tracks}}</p>
                    <p><a href="/index/{{.ID}}">Page de {{.Name}}</a></p>
                </div>
            </div>
        </li>
    {{end}}

</ul>
<script>
    var input = document.getElementById('search');
    input.addEventListener('input', function() {
        var value = input.value;
        var datalist = document.getElementById('suggestions');
        var options = datalist.options;
        var matches = [];
        for (var i = 0; i < options.length; i++) {
            var option = options[i];
            if (option.value.indexOf(value) === 0) {
                matches.push(option.value);
            }
        }
        datalist.innerHTML = '';
        matches.forEach(function(match) {
            var option = document.createElement('option');
            option.value = match;
            datalist.appendChild(option);
        });
    });


</script>
</body>
</html>
